set max_line_width 750;
OK
--create topic test_topic 16;

list();
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stream_name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
0 rows returned

usa.news := (bridge from test_topic partitions = 16 props = ());
OK
-- create with newlines to make sure it formats ok in show;
usa.weather :=
(
    bridge from test_topic partitions = 16
    props = ("foo" = "here    are    some     spaces")
);
OK
uk.news := (bridge from test_topic partitions = 16 props = ());
OK
uk.weather := (bridge from test_topic partitions = 16 props = ());
OK
usa.news.sub1 := usa.news->(store stream);
OK
usa.news.sub2 := usa.news->(store stream);
OK

(scan all from sys.streams) -> (sort by stream_name);
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stream_name                                                                                       | stream_def                                                                                        | in_schema                                                                                         | in_partitions        | in_mapping                                                                                        | out_schema                                                                                        | out_partitions       | out_mapping                                                                                       | child_streams                                                                                     |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| uk.news                                                                                           | (bridge from test_topic partitions = 16 props = ())                                               | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | null                                                                                              |
| uk.weather                                                                                        | (bridge from test_topic partitions = 16 props = ())                                               | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | null                                                                                              |
| usa.news                                                                                          | (bridge from test_topic partitions = 16 props = ())                                               | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | usa.news.sub1, usa.news.sub2                                                                      |
| usa.news.sub1                                                                                     | usa.news->(store stream)                                                                          | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | null                                                                                              |
| usa.news.sub2                                                                                     | usa.news->(store stream)                                                                          | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | null                                                                                              |
| usa.weather                                                                                       | ( bridge from test_topic partitions = 16 props = ("foo" = "here    are    some     spaces") )     | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | null                                                                                              |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
6 rows returned

(scan all from sys.streams) -> (project stream_name, stream_def) -> (sort by stream_name);
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stream_name                                                                                                                                                                                                                                                                                                                                                                         | stream_def                                                                                                                                                                                                                                                                                                                                                                          |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| uk.news                                                                                                                                                                                                                                                                                                                                                                             | (bridge from test_topic partitions = 16 props = ())                                                                                                                                                                                                                                                                                                                                 |
| uk.weather                                                                                                                                                                                                                                                                                                                                                                          | (bridge from test_topic partitions = 16 props = ())                                                                                                                                                                                                                                                                                                                                 |
| usa.news                                                                                                                                                                                                                                                                                                                                                                            | (bridge from test_topic partitions = 16 props = ())                                                                                                                                                                                                                                                                                                                                 |
| usa.news.sub1                                                                                                                                                                                                                                                                                                                                                                       | usa.news->(store stream)                                                                                                                                                                                                                                                                                                                                                            |
| usa.news.sub2                                                                                                                                                                                                                                                                                                                                                                       | usa.news->(store stream)                                                                                                                                                                                                                                                                                                                                                            |
| usa.weather                                                                                                                                                                                                                                                                                                                                                                         | ( bridge from test_topic partitions = 16 props = ("foo" = "here    are    some     spaces") )                                                                                                                                                                                                                                                                                       |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
6 rows returned

(get "usa.news" from sys.streams);
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stream_name                                                                                       | stream_def                                                                                        | in_schema                                                                                         | in_partitions        | in_mapping                                                                                        | out_schema                                                                                        | out_partitions       | out_mapping                                                                                       | child_streams                                                                                     |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| usa.news                                                                                          | (bridge from test_topic partitions = 16 props = ())                                               | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | usa.news.sub1, usa.news.sub2                                                                      |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row returned

(scan all from sys.streams) -> (filter by matches(stream_name, "^usa")) -> (sort by stream_name);
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stream_name                                                                                       | stream_def                                                                                        | in_schema                                                                                         | in_partitions        | in_mapping                                                                                        | out_schema                                                                                        | out_partitions       | out_mapping                                                                                       | child_streams                                                                                     |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| usa.news                                                                                          | (bridge from test_topic partitions = 16 props = ())                                               | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | usa.news.sub1, usa.news.sub2                                                                      |
| usa.news.sub1                                                                                     | usa.news->(store stream)                                                                          | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | null                                                                                              |
| usa.news.sub2                                                                                     | usa.news->(store stream)                                                                          | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | null                                                                                              |
| usa.weather                                                                                       | ( bridge from test_topic partitions = 16 props = ("foo" = "here    are    some     spaces") )     | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | null                                                                                              |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
4 rows returned

(scan all from sys.streams) -> (filter by matches(stream_name, "^uk")) -> (sort by stream_name);
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stream_name                                                                                       | stream_def                                                                                        | in_schema                                                                                         | in_partitions        | in_mapping                                                                                        | out_schema                                                                                        | out_partitions       | out_mapping                                                                                       | child_streams                                                                                     |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| uk.news                                                                                           | (bridge from test_topic partitions = 16 props = ())                                               | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | null                                                                                              |
| uk.weather                                                                                        | (bridge from test_topic partitions = 16 props = ())                                               | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes                           | 16                   | _default_                                                                                         | null                                                                                              |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
2 rows returned

list();
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stream_name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| uk.news                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| uk.weather                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| usa.news                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| usa.news.sub1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| usa.news.sub2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| usa.weather                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
6 rows returned

list("^usa");
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stream_name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| usa.news                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| usa.news.sub1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| usa.news.sub2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| usa.weather                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
4 rows returned

show(usa.news);

stream_name:   usa.news
stream_def:    (bridge from test_topic partitions = 16 props = ())
in_schema:     {offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes} partitions: 16 mapping_id: _default_
out_schema:    {offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes} partitions: 16 mapping_id: _default_
child_streams: usa.news.sub1, usa.news.sub2

show(usa.weather);

stream_name:   usa.weather
stream_def:    ( bridge from test_topic partitions = 16 props = ("foo" = "here    are    some     spaces") )
in_schema:     {offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes} partitions: 16 mapping_id: _default_
out_schema:    {offset: int, event_time: timestamp, key: bytes, hdrs: bytes, val: bytes} partitions: 16 mapping_id: _default_
child_streams: [none]

show(not_exists);
unknown stream

delete(usa.news.sub1);
OK
delete(uk.news);
OK

list();
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| stream_name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| uk.weather                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| usa.news                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| usa.news.sub2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| usa.weather                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
4 rows returned

-- errors;

-- invalid regex;
(scan all from sys.streams) -> (filter by matches(stream_name, "[a-zA-Z+")) -> (sort by stream_name);
invalid regex syntax (line 1 column 64):
(scan all from sys.streams) -> (filter by matches(stream_name, "[a-zA-Z+")) -> (sort by stream_name)
                                                               ^

-- invalid quoted string literal;
(scan all from sys.streams) -> (filter by matches(stream_name, "^usa\.*")) -> (sort by stream_name);
invalid quoted string literal (line 1 column 64):
(scan all from sys.streams) -> (filter by matches(stream_name, "^usa\.*")) -> (sort by stream_name)
                                                               ^

show();
expected identifier but found ')' (line 1 column 6):
show()
     ^

show(;
reached end of statement

list(;
reached end of statement

delete(usa.news.sub2);
OK
delete(usa.news);
OK
delete(usa.weather);
OK
delete(uk.weather);
OK

--delete topic test_topic;
